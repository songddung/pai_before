# PAI ì„œë¹„ìŠ¤ ë¹ ë¥¸ ë°°í¬ ê°€ì´ë“œ

## ğŸš€ ë¹ ë¥¸ ì‹œì‘ (Quick Start)

### 1ï¸âƒ£ ì‚¬ì „ ìš”êµ¬ì‚¬í•­
```bash
# í•„ìˆ˜ ì„¤ì¹˜ í•­ëª©
- Docker 24.x ì´ìƒ
- Docker Compose 2.x ì´ìƒ
- Git
- ìµœì†Œ 8GB RAM, 4 Core CPU
```

### 2ï¸âƒ£ ì €ì¥ì†Œ í´ë¡ 
```bash
git clone <repository-url>
cd PAI-S13P21C101
```

### 3ï¸âƒ£ í™˜ê²½ ë³€ìˆ˜ ì„¤ì •
```bash
# í™˜ê²½ íŒŒì¼ ë³µì‚¬ ë° ìˆ˜ì •
cp BE/apps/gateway/.env.example BE/apps/gateway/.env
cp BE/apps/user-service/.env.example BE/apps/user-service/.env
cp BE/apps/media-service/.env.example BE/apps/media-service/.env
cp BE/apps/ark-service/.env.example BE/apps/ark-service/.env
cp BE/apps/conversation-service/.env.example BE/apps/conversation-service/.env
cp BE/apps/quiz-service/.env.example BE/apps/quiz-service/.env
cp AI_integration/.env.example AI_integration/.env
```

### 4ï¸âƒ£ ì„œë¹„ìŠ¤ ì‹¤í–‰
```bash
cd BE

# ë°±ê·¸ë¼ìš´ë“œì—ì„œ ì „ì²´ ì„œë¹„ìŠ¤ ì‹œì‘
docker-compose up -d

# ë¡œê·¸ í™•ì¸
docker-compose logs -f
```

### 5ï¸âƒ£ ìƒíƒœ í™•ì¸
```bash
# ì„œë¹„ìŠ¤ ìƒíƒœ í™•ì¸
docker-compose ps

# í—¬ìŠ¤ ì²´í¬
curl http://localhost:3006/health
```

---

## ğŸ—ï¸ ì„œë¹„ìŠ¤ êµ¬ì„±

### ğŸŒ ì ‘ê·¼ URL
- **Local**: http://localhost:3006
- **Production**: https://j13c101.p.ssafy.io

### ğŸ“Š ì„œë¹„ìŠ¤ í¬íŠ¸
| ì„œë¹„ìŠ¤ | ë‚´ë¶€ í¬íŠ¸ | ì„¤ëª… |
|--------|-----------|------|
| Gateway | 3006 | API ê²Œì´íŠ¸ì›¨ì´ |
| User Service | 3001 | ì‚¬ìš©ì ê´€ë¦¬ |
| Media Service | 3002 | íŒŒì¼ ê´€ë¦¬ |
| ARK Service | 3003 | ê´€ì‹¬ì‚¬ ë¶„ì„ |
| Conversation Service | 3004 | ëŒ€í™” ê´€ë¦¬ |
| Quiz Service | 3005 | í€´ì¦ˆ ê´€ë¦¬ |
| AI Service | 8000 | AI ê¸°ëŠ¥ |
| PostgreSQL | 5432 | ë©”ì¸ ë°ì´í„°ë² ì´ìŠ¤ |
| Redis | 6379 | ìºì‹œ/ì„¸ì…˜ |

---

## âš™ï¸ í™˜ê²½ ë³€ìˆ˜ ì„¤ì • ì˜ˆì‹œ

### Gateway (.env)
```bash
PORT=3006
JWT_SECRET=your-super-secret-jwt-key-minimum-32-characters
JWT_EXPIRES_IN=1h
REFRESH_TOKEN_EXPIRES_IN=7d

USER_SERVICE_URL=http://user-service:3001
MEDIA_SERVICE_URL=http://media-service:3002
ARK_SERVICE_URL=http://ark-service:3003
CONVERSATION_SERVICE_URL=http://conversation-service:3004
QUIZ_SERVICE_URL=http://quiz-service:3005
AI_SERVICE_URL=http://ai-service:8000

REDIS_HOST=redis
REDIS_PORT=6379
```

### User Service (.env)
```bash
PORT=3001
DATABASE_HOST=postgres
DATABASE_PORT=5432
DATABASE_NAME=pai_db
DATABASE_USER=pai_user
DATABASE_PASSWORD=your-secure-password

JWT_SECRET=your-super-secret-jwt-key-minimum-32-characters
BCRYPT_ROUNDS=12

REDIS_HOST=redis
REDIS_PORT=6379
```

### AI Service (.env)
```bash
PORT=8000
CORS_ORIGINS=*
DEBUG=false

TTS_MODEL_PATH=/app/models/tts
TTS_DEVICE=cpu
VQA_MODEL_PATH=/app/models/vqa
VQA_DEVICE=cpu
```

---

## ğŸ”§ ê°œë°œ í™˜ê²½ ì„¤ì •

### Backend ê°œë°œ ì„œë²„
```bash
cd BE
npm install

# ê°œë³„ ì„œë¹„ìŠ¤ ì‹¤í–‰
npm run start:dev gateway
npm run start:dev user-service
npm run start:dev conversation-service
```

### Frontend ê°œë°œ ì„œë²„
```bash
cd FE
npm install

# Expo ê°œë°œ ì„œë²„ ì‹œì‘
npx expo start

# iOS ì‹œë®¬ë ˆì´í„°
npx expo start --ios

# Android ì—ë®¬ë ˆì´í„°
npx expo start --android
```

---

## ğŸ” ëª¨ë‹ˆí„°ë§ ë° ë¡œê·¸

### ë¡œê·¸ í™•ì¸
```bash
# ì „ì²´ ì„œë¹„ìŠ¤ ë¡œê·¸
docker-compose logs -f

# íŠ¹ì • ì„œë¹„ìŠ¤ ë¡œê·¸
docker-compose logs -f gateway
docker-compose logs -f user-service

# ì‹¤ì‹œê°„ ë¡œê·¸ (ìµœê·¼ 100ì¤„)
docker-compose logs -f --tail=100
```

### ìƒíƒœ ëª¨ë‹ˆí„°ë§
```bash
# ì»¨í…Œì´ë„ˆ ìƒíƒœ
docker-compose ps

# ë¦¬ì†ŒìŠ¤ ì‚¬ìš©ëŸ‰
docker stats

# ì„œë¹„ìŠ¤ í—¬ìŠ¤ ì²´í¬
curl http://localhost:3006/api/health
curl http://localhost:3001/health
curl http://localhost:8000/health
```

---

## ğŸ—„ï¸ ë°ì´í„°ë² ì´ìŠ¤ ê´€ë¦¬

### PostgreSQL ì ‘ì†
```bash
# ë°ì´í„°ë² ì´ìŠ¤ ì ‘ì†
docker exec -it postgres psql -U pai_user -d pai_db

# í…Œì´ë¸” í™•ì¸
\dt

# ì‚¬ìš©ì ëª©ë¡ í™•ì¸
SELECT * FROM users LIMIT 5;
```

### Redis ì ‘ì†
```bash
# Redis ì ‘ì†
docker exec -it redis redis-cli

# í‚¤ ëª©ë¡ í™•ì¸
KEYS *

# ì—°ê²° í…ŒìŠ¤íŠ¸
PING
```

### ë°ì´í„°ë² ì´ìŠ¤ ë°±ì—…
```bash
# PostgreSQL ë°±ì—…
docker exec postgres pg_dump -U pai_user pai_db > backup_$(date +%Y%m%d).sql

# Redis ë°±ì—…
docker exec redis redis-cli SAVE
docker cp redis:/data/dump.rdb ./redis_backup_$(date +%Y%m%d).rdb
```

---

## ğŸ”„ ì„œë¹„ìŠ¤ ê´€ë¦¬

### ì„œë¹„ìŠ¤ ì¬ì‹œì‘
```bash
# ì „ì²´ ì„œë¹„ìŠ¤ ì¬ì‹œì‘
docker-compose restart

# íŠ¹ì • ì„œë¹„ìŠ¤ë§Œ ì¬ì‹œì‘
docker-compose restart gateway
docker-compose restart user-service
```

### ì„œë¹„ìŠ¤ ìŠ¤ì¼€ì¼ë§
```bash
# íŠ¹ì • ì„œë¹„ìŠ¤ ì¸ìŠ¤í„´ìŠ¤ ì¦ê°€
docker-compose up -d --scale user-service=3
docker-compose up -d --scale conversation-service=2
```

### ì„œë¹„ìŠ¤ ì¤‘ì§€ ë° ì •ë¦¬
```bash
# ì„œë¹„ìŠ¤ ì¤‘ì§€
docker-compose stop

# ì„œë¹„ìŠ¤ ì¤‘ì§€ ë° ì»¨í…Œì´ë„ˆ ì œê±°
docker-compose down

# ë³¼ë¥¨ê¹Œì§€ ì œê±° (ë°ì´í„° ì‚­ì œ ì£¼ì˜!)
docker-compose down -v

# ì´ë¯¸ì§€ê¹Œì§€ ì •ë¦¬
docker-compose down --rmi all
```

---

## ğŸš¨ ë¬¸ì œ í•´ê²°

### ì¼ë°˜ì ì¸ ë¬¸ì œ

#### í¬íŠ¸ ì¶©ëŒ
```bash
# í¬íŠ¸ ì‚¬ìš© í™•ì¸
netstat -tlnp | grep :3006
lsof -i :3006

# í”„ë¡œì„¸ìŠ¤ ì¢…ë£Œ
kill -9 <PID>
```

#### ë©”ëª¨ë¦¬ ë¶€ì¡±
```bash
# ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ í™•ì¸
docker stats

# ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” ì»¨í…Œì´ë„ˆ/ì´ë¯¸ì§€ ì •ë¦¬
docker system prune -a
```

#### ë„¤íŠ¸ì›Œí¬ ë¬¸ì œ
```bash
# Docker ë„¤íŠ¸ì›Œí¬ í™•ì¸
docker network ls
docker network inspect be_pai

# ë„¤íŠ¸ì›Œí¬ ì¬ìƒì„±
docker-compose down
docker-compose up -d
```

### ì„œë¹„ìŠ¤ë³„ ë¬¸ì œ

#### Gateway ì ‘ì† ë¶ˆê°€
```bash
# Gateway ë¡œê·¸ í™•ì¸
docker-compose logs gateway

# Gateway ì¬ì‹œì‘
docker-compose restart gateway

# í¬íŠ¸ í™•ì¸
curl http://localhost:3006/health
```

#### ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° ì‹¤íŒ¨
```bash
# PostgreSQL ìƒíƒœ í™•ì¸
docker-compose logs postgres

# ì—°ê²° í…ŒìŠ¤íŠ¸
docker exec postgres pg_isready -U pai_user

# ë°ì´í„°ë² ì´ìŠ¤ ì¬ì‹œì‘
docker-compose restart postgres
```

#### AI ì„œë¹„ìŠ¤ ì‘ë‹µ ì—†ìŒ
```bash
# AI ì„œë¹„ìŠ¤ ë¡œê·¸ í™•ì¸
docker-compose logs ai-service

# AI ì„œë¹„ìŠ¤ í—¬ìŠ¤ ì²´í¬
curl http://localhost:8000/health

# ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ í™•ì¸ (AI ì„œë¹„ìŠ¤ëŠ” ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ì´ ë†’ìŒ)
docker stats ai-service
```

---

## ğŸ“± ëª¨ë°”ì¼ ì•± ì„¤ì •

### ê°œë°œ í™˜ê²½
```bash
# FE/.env íŒŒì¼ ìƒì„±
echo "API_BASE_URL=http://localhost:3006" > FE/.env
```

### í”„ë¡œë•ì…˜ í™˜ê²½
```bash
# FE/.env íŒŒì¼ ìˆ˜ì •
echo "API_BASE_URL=https://j13c101.p.ssafy.io" > FE/.env
```

### ì•± ë¹Œë“œ
```bash
cd FE

# ê°œë°œ ë¹Œë“œ
npx expo build:android
npx expo build:ios

# í”„ë¡œë•ì…˜ ë¹Œë“œ
npx expo build:android --release-channel production
npx expo build:ios --release-channel production
```

---

## ğŸ”’ ë³´ì•ˆ ì„¤ì •

### SSL/TLS (í”„ë¡œë•ì…˜)
```yaml
# docker-compose.ymlì˜ Traefik ì„¤ì •
traefik:
  command:
    - '--certificatesresolvers.letsencrypt.acme.email=your-email@domain.com'
  labels:
    - 'traefik.http.routers.gateway.rule=Host(`your-domain.com`)'
```

### í™˜ê²½ ë³€ìˆ˜ ë³´ì•ˆ
```bash
# ê°•ë ¥í•œ JWT ì‹œí¬ë¦¿ ìƒì„±
openssl rand -base64 32

# ê°•ë ¥í•œ ë°ì´í„°ë² ì´ìŠ¤ ë¹„ë°€ë²ˆí˜¸ ìƒì„±
openssl rand -base64 16
```

---

## ğŸ“ˆ ì„±ëŠ¥ ìµœì í™”

### ë¦¬ì†ŒìŠ¤ ì œí•œ ì„¤ì •
```yaml
# docker-compose.ymlì— ì¶”ê°€
services:
  user-service:
    mem_limit: 512m
    cpus: '0.5'

  ai-service:
    mem_limit: 2g
    cpus: '1.0'
```

### ìºì‹œ ì„¤ì •
```bash
# Redis ë©”ëª¨ë¦¬ ìµœì í™”
echo "maxmemory 256mb" >> redis.conf
echo "maxmemory-policy allkeys-lru" >> redis.conf
```

---

## ğŸ“ ì§€ì› ë° ë¬¸ì˜

### ë¹ ë¥¸ ë„ì›€ë§
- **ë¡œê·¸ í™•ì¸**: `docker-compose logs -f`
- **ìƒíƒœ í™•ì¸**: `docker-compose ps`
- **ì¬ì‹œì‘**: `docker-compose restart`
- **ì •ë¦¬**: `docker system prune`

### ì¶”ê°€ ë¦¬ì†ŒìŠ¤
- [ìƒì„¸ í¬íŒ… ë§¤ë‰´ì–¼](./í¬íŒ…ë§¤ë‰´ì–¼.md)
- [ì‹œì—° ì‹œë‚˜ë¦¬ì˜¤](./ì‹œì—°ì‹œë‚˜ë¦¬ì˜¤.md)
- API ë¬¸ì„œ: http://localhost:3006/api/docs

### ê¸´ê¸‰ ì§€ì›
- GitHub Issues: ë¬¸ì œ ì‹ ê³ 
- ê°œë°œíŒ€ ì´ë©”ì¼: dev@pai.com

---

**ì´ ê°€ì´ë“œë¥¼ ë”°ë¼í•˜ë©´ PAI ì„œë¹„ìŠ¤ë¥¼ ë¹ ë¥´ê²Œ ë°°í¬í•˜ê³  ì‹¤í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì¶”ê°€ì ì¸ ì„¤ì •ì´ë‚˜ ë¬¸ì œ í•´ê²°ì´ í•„ìš”í•˜ë©´ ìƒì„¸ í¬íŒ… ë§¤ë‰´ì–¼ì„ ì°¸ì¡°í•˜ì„¸ìš”.**